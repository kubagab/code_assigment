# code_assigment                                                   
                                                                                                                                                                                                      
   2. **Skonfiguruj zmienne środowiskowe:**                                                                                                                                                           
                                                                                                                                                                                                      
   Skopiuj plik `.env.example` do `.env` i uzupełnij wartości:                                                                                                                                        
                                                                                                                                                                                                      
   ```bash                                                                                                                                                                                            
   cp .env.example .env                                                                                                                                                                               
   ```                                                                                                                                                                                                
                                                                                                                                                                                                      
   Zawartość `.env`:                                                                                                                                                         
   DATABASE_URL=postgresql://user:password@localhost:5438/property_db                                                                                                                                 
   PORT=4000                                                                                                                                                                                          
   WEATHERSTACK_API_KEY=twoj_klucz_api                                                                                                                                                                                                                                                                                    
   3. **Uruchom bazę danych PostgreSQL:**                                                                                                                                       
   docker-compose up -d                                                                                                                                                                                                                                                                                          
   4. **Wykonaj migracje Prisma:**                                                                                                                                                
   npx prisma migrate dev                                                                                                                                                                                                                                                                                                 
   ## Uruchomienie                                                                                                                                                                                    
                                                                                                                                                                                                      
   **Tryb deweloperski (z hot-reload):**                                                                                                                                             
   npm run dev                                                                                                                                                           
   **Tryb produkcyjny:**                                                                                                                                                                                                                                                                                                                                                                     
   npm run build                                                                                                                                                                                      
   npm run start                                                                                                                                                  
   Serwer uruchomi się na `http://localhost:4000` (lub porcie zdefiniowanym w `.env`).                                                                                                                
                                                                                                                                                                                                      
   ## GraphQL API                                                                                                                                                                                     
                                                                                                                                                                                                      
   Po uruchomieniu serwera, GraphQL Playground dostępny jest pod adresem: `http://localhost:4000`                                                                                                     
                                                                                                                                                                                                      
   ### Queries                                                                                                                                                                                        
                                                                                                                                                                                                      
   #### Pobierz wszystkie nieruchomości                                                                                                                                                                       
   query {                                                                                                                                                                                            
     properties {                                                                                                                                                                                     
       id                                                                                                                                                                                             
       city                                                                                                                                                                                           
       street                                                                                                                                                                                         
       state                                                                                                                                                                                          
       zipCode                                                                                                                                                                                        
       lat                                                                                                                                                                                            
       long                                                                                                                                                                                           
       weatherData                                                                                                                                                                                    
       createdAt                                                                                                                                                                                      
     }                                                                                                                                                                                                
   }                                                                                                                                                                                                                                                                                                                              
   #### Pobierz z sortowaniem po dacie utworzenia (malejąco)                                                                                                                                          
                                                                                                                                                                                                      
   graphql                                                                                                                                                                                         
   query {                                                                                                                                                                                            
     properties(sortByDateDesc: true) {                                                                                                                                                               
       id                                                                                                                                                                                             
       city                                                                                                                                                                                           
       street                                                                                                                                                                                         
       createdAt                                                                                                                                                                                      
     }                                                                                                                                                                                                
   }                                                                                                                                                                                                                                                                                                                                                                                            
   #### Filtrowanie po mieście, stanie lub kodzie pocztowym                                                                                                                         
   query {                                                                                                                                                                                            
     properties(filter: { city: "Phoenix" }) {                                                                                                                                                        
       id                                                                                                                                                                                             
       city                                                                                                                                                                                           
       street                                                                                                                                                                                         
     }                                                                                                                                                                                                
   }                                                                                                                                                                                                  
                                                                                                                                                                                                      
   query {                                                                                                                                                                                            
     properties(filter: { state: "AZ" }) {                                                                                                                                                            
       id                                                                                                                                                                                             
       city                                                                                                                                                                                           
       state                                                                                                                                                                                          
     }                                                                                                                                                                                                
   }                                                                                                                                                                                                  
                                                                                                                                                                                                      
   query {                                                                                                                                                                                            
     properties(filter: { zipCode: "85268" }) {                                                                                                                                                       
       id                                                                                                                                                                                             
       city                                                                                                                                                                                           
       zipCode                                                                                                                                                                                        
     }                                                                                                                                                                                                
   }                                                                                                                                                                                                  
                                                                                                                                                                                                      
   query {                                                                                                                                                                                            
     properties(filter: { city: "Phoenix", state: "AZ" }, sortByDateDesc: true) {                                                                                                                     
       id                                                                                                                                                                                             
       city                                                                                                                                                                                           
       state                                                                                                                                                                                          
       createdAt                                                                                                                                                                                      
     }                                                                                                                                                                                                
   }                                                                                                                                                                                                                                                                                                                            
   #### Pobierz szczegóły pojedynczej nieruchomości                                                                                                                             
   query {                                                                                                                                                                                            
     property(id: "uuid-nieruchomosci") {                                                                                                                                                             
       id                                                                                                                                                                                             
       city                                                                                                                                                                                           
       street                                                                                                                                                                                         
       state                                                                                                                                                                                          
       zipCode                                                                                                                                                                                        
       lat                                                                                                                                                                                            
       long                                                                                                                                                                                           
       weatherData                                                                                                                                                                                    
       createdAt                                                                                                                                                                                      
     }                                                                                                                                                                                                
   }                                                                                                                                                                              
   #### Dodaj nową nieruchomość                                                                                                                                                    
   mutation {                                                                                                                                                                                         
     createProperty(                                                                                                                                                                                  
       city: "Fountain Hills"                                                                                                                                                                         
       street: "15528 E Golden Eagle Blvd"                                                                                                                                                            
       state: "AZ"                                                                                                                                                                                    
       zipCode: "85268"                                                                                                                                                                               
     ) {                                                                                                                                                                                              
       id                                                                                                                                                                                             
       city                                                                                                                                                                                           
       street                                                                                                                                                                                         
       state                                                                                                                                                                                          
       zipCode                                                                                                                                                                                        
       lat                                                                                                                                                                                            
       long                                                                                                                                                                                           
       weatherData                                                                                                                                                                                    
       createdAt                                                                                                                                                                                      
     }                                                                                                                                                                                                
   }                                                                                                                                                                                                                                                                                                                           
   **Walidacja:**                                                                                                                                                                                     
   - `city` - wymagane, niepuste                                                                                                                                                                      
   - `street` - wymagane, niepuste                                                                                                                                                                    
   - `state` - wymagane, dokładnie 2 znaki (skrót stanu USA, np. "AZ", "CA")                                                                                                                          
   - `zipCode` - wymagane, dokładnie 5 cyfr (np. "85268")                                                                                                                                             
                                                                                                                                                                                                      
   **Uwaga:** Podczas tworzenia nieruchomości, API automatycznie pobiera dane pogodowe i współrzędne geograficzne z Weatherstack API na podstawie podanego miasta.                                    
                                                                                                                                                                                                      
   #### Usuń nieruchomość                                                                                                                                                                                                                                                                                                    
   mutation {                                                                                                                                                                                         
     deleteProperty(id: "uuid-nieruchomosci")                                                                                                                                                         
   }                     
